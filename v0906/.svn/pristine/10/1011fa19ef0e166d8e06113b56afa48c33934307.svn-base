/**
 * 
 */
package com.qigan.qiganshop.controller.backstage;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.qigan.qiganshop.pojo.CommonPage;
import com.qigan.qiganshop.pojo.UserCoupon;
import com.qigan.qiganshop.service.UserCouponService;
import com.qigan.qiganshop.util.result.format.JsonResult;
import com.qigan.qiganshop.util.result.format.ResultCode;

/**
 * @author wyy
 *
 */
@RestController
@RequestMapping("/user/coupan")
public class XltcUserCouponController {
	
	@Autowired
	UserCouponService service;
	
	@Autowired
	JsonResult jr;
	
	@RequestMapping("/findOne.do")
	public JsonResult findOne(String userCouponId){
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功", service.findOne(userCouponId));
	}
	
	@RequestMapping("/findByUserId.do")
	public JsonResult findByUserIdAndCouponId(String userId, String couponId){
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功", service.findByUserIdAndCouponId(userId, couponId));
	}
	
	@RequestMapping("/findAll.do")
	public JsonResult findAll(CommonPage page, String userId){
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功", service.findAll(userId, page));
	}
	
	@RequestMapping("/findByconditions.do")
	public JsonResult findAll(CommonPage page, String userId, String type){
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功", service.findByConditions(page, userId, type));
	}
	
	@RequestMapping("/findPage.do")
	public JsonResult findByUserIdAndCouponId(CommonPage page, String userId){
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功", service.findPage(userId, page.getPage(), page.getSize()));
	}
	
	@RequestMapping("/add.do")
	public JsonResult add(@RequestBody List<UserCoupon> userCoupon){
		for (UserCoupon coupon : userCoupon) {
			service.add(coupon);
		}
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功");
	}
	
	@RequestMapping("/update.do")
	public JsonResult update(@RequestBody UserCoupon userCoupon){
		service.update(userCoupon);
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功");
	}
	
	@RequestMapping("/delete.do")
	public JsonResult update(String... userCouponIds){
		service.delete(userCouponIds);
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功");
	}
	
	@RequestMapping("/isShow.do")
	public JsonResult isShow(String userId){
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功", service.isShowReceive(userId));
	}
	
	@RequestMapping("/findList.do")
	public JsonResult findCanReceiveAndCanUse(String userId){
		return jr.jsonResultData(ResultCode.SUCCESS.res_code(), "操作成功", service.findCanReceiveAndCanUse(userId));
	}
}
